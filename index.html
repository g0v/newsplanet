<!DOCTYPE html>
<html lang="zh-tw">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>News Planet - 輕鬆閱讀10億以下資本額的媒體們</title>
  <link href="//netdna.bootstrapcdn.com/bootswatch/3.0.0/cosmo/bootstrap.min.css" rel="stylesheet">
  <style>
   body { font-family: "Open Sans",'\5FAE\8F6F\96C5\9ED1','微軟正黑體', sans-serif; }
   #___gcse_0 {max-width:500px;}
   .thumb { text-align: center; }
   .thumb img {height: 180px;}
   .col-lg-4 {max-height: 500px;}
   h3.title { font-family: "Open Sans",'\5FAE\8F6F\96C5\9ED1','微軟正黑體', sans-serif; }
   #items {
     margin-top: 60px;
   }
  </style>
</head>
<body>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script type="text/javascript">
  function pipeCallback(obj){ 
    var x, item, desc, img, row, more;
    for (x = 0; x < obj.count ; x++){
      if(obj.value.items[x].link.match('.4way')){
        continue;
      }
      if(x%3 == 0){
        $("#items").append(row);
        row = $('<div class="row"></div>');
      }
      desc = obj.value.items[x].description.replace(/(&#[^;]+;)|(\n|\r|\[|\])/gi, '');
      desc = $(desc);
      desc.find('img[src*=feedburner]').remove();
      img = desc.find('img:first');
      if(img.length){
        img.addClass('img-responsive').addClass('img-thumbnail');
        img.removeAttr('width');
        img.removeAttr('align');
        img.removeAttr('style');
        img = img.wrapAll('<div></div>').parent().html(); 
        img = '<div class="thumb">'+img+'</div>';
      }
      else{
        img = '';
      }
      desc = obj.value.items[x].description.replace(/<\/?[^>]+>/gi, '');
      desc = '<span>'+desc.substr(0, 200)+ '...</span>';
      more = '<span class="btn btn-primary btn-xs"><a style="color:white" href="'+obj.value.items[x].link+'">More...</a></span>';
      item = '<div class="col-lg-4"><h3 class="title"><a href="' + obj.value.items[x].link + '">' + obj.value.items[x].title + '</a></h3>'+
      '<div class="well">'+
      '<div class="time">' + obj.value.items[x].pubDate + '</div>'+
      '<div class="desc">'+img+desc+more+'</div>'+
      '</div></div>';
      $(row).append(item);
    }
    $("#items > .loading").hide();
  }
  $(document).ready(function(){
    $('.navbar-nav li a').click(function(){
      var key = $(this).attr('rel');
      if(key){
        $('input[name=search]').val(key); $('.gsc-search-button').click();
      }
    });
  });
</script>
<div class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#">媒體大亂鬥</a>
    </div>
    <div class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="active"><a href="/">Home</a></li>
        <li><a href="#" rel="環境">環境</a></li>
        <li><a href="#" rel="勞工">勞工</a></li>
        <li><a href="#" rel="藝術">藝術</a></li>
        <li><a href="#" rel="人權">人權</a></li>
      </ul>
      <div class="navbar-right">
      <script>
        (function() {
          var cx = '000300823391303551595:dacmu1ptct8';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
              '//www.google.com/cse/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
      </script>
      <gcse:searchbox></gcse:searchbox>
      </div>
    </div>
  </div>
</div>
  <gcse:searchresults></gcse:searchresults>
<div id="items" class="container"><div class="loading">Loading...</div></div>
<script type="text/javascript" src="http://pipes.yahoo.com/pipes/pipe.run?_id=ce3c84ad49c9b57f6911228b10ecae54&_render=json&_callback=pipeCallback"></script>
</body>
</html>
